{"version":3,"file":"js/954.js","mappings":"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","sources":["webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue?88f4","webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue","webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue?c653"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-c4ad9526\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"admin-cases\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_3 = { class: \"cases__content\" }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"cases-form\"\n}\nconst _hoisted_5 = { class: \"form-item item-images\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Добавьте изображения кейса:\", -1))\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = [\"checked\", \"onChange\"]\nconst _hoisted_9 = { class: \"image-upload-form\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"image-upload\" }, \"Выберите изображение:\", -1))\nconst _hoisted_11 = {\n  key: 0,\n  class: \"image-preview\"\n}\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Предварительный просмотр:\", -1))\nconst _hoisted_13 = [\"src\"]\nconst _hoisted_14 = { class: \"form-item\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-name\" }, \"Название кейса:\", -1))\nconst _hoisted_16 = { class: \"form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-category\" }, \"Категория:\", -1))\nconst _hoisted_18 = { class: \"form-item\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-introduction\" }, \"Введение:\", -1))\nconst _hoisted_20 = { class: \"form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-diagnos\" }, \"Диагноз:\", -1))\nconst _hoisted_22 = { class: \"form-item\" }\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-treatment\" }, \"Лечение:\", -1))\nconst _hoisted_24 = { class: \"form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-total-cost\" }, \"Общая стоимость:\", -1))\nconst _hoisted_26 = { class: \"form-item\" }\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-slug\" }, \"Slug:\", -1))\nconst _hoisted_28 = { class: \"form-item\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Доктор:\", -1))\nconst _hoisted_30 = [\"value\"]\nconst _hoisted_31 = { class: \"form-item\" }\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Цены:\", -1))\nconst _hoisted_33 = [\"value\"]\nconst _hoisted_34 = { class: \"form-actions\" }\nconst _hoisted_35 = { key: 2 }\nconst _hoisted_36 = [\"onClick\"]\nconst _hoisted_37 = [\"onClick\"]\n\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { Heading } from '@/shared/ui/text/heading';\r\nimport { Button } from '@/shared/ui/button'\r\nimport { Icon } from '@/shared/ui/icons'\r\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\nimport { Prices } from '@/entities/price/model/price.types'\r\n\r\ninterface Image {\r\n    id: string;\r\n    path: string;\r\n    isTitle: boolean;\r\n}\r\n\r\n\r\ninterface Doctor {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    middleName: string;\r\n}\r\n\r\ninterface Case {\r\n    id: string;\r\n    name: string;\r\n    category: string;\r\n    introduction: string;\r\n    diagnos: string;\r\n    treatment: string;\r\n    totalCost: number;\r\n    slug: string;\r\n    images: Image[];\r\n    price: Prices[];\r\n    doctor: Doctor;\r\n}\r\n\r\nconst casesApi = 'http://5.35.90.116:8000/cases';\r\nconst caseImagesApi = 'http://5.35.90.116:8000/images';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst casesData = ref<Case[]>([]);\r\nconst pricesData = ref<Prices[]>([]);\r\nconst doctorsData = ref<Doctor[]>([]);\r\nconst selectedCase = ref<Case | null>(null);\r\nconst selectedPriceIds = ref<string[]>([]);\r\nconst imagePreview = ref<string | null>(null);\r\nconst selectedFile = ref<File | null>(null);\r\nconst isAdding = ref(false);\r\n\r\nconst getAuthToken = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n        console.error('Токен отсутствует');\r\n        return null;\r\n    }\r\n    return token;\r\n};\r\n\r\nconst fetchCases = async () => {\r\n    try {\r\n        const response = await axios.get(casesApi);\r\n        casesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейсов:', error);\r\n    }\r\n};\r\n\r\nconst fetchPrices = async () => {\r\n    try {\r\n        const response = await axios.get('http://5.35.90.116:8000/prices');\r\n        pricesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении цен:', error);\r\n    }\r\n};\r\n\r\nconst fetchDoctors = async () => {\r\n    try {\r\n        const response = await axios.get('http://5.35.90.116:8000/doctors');\r\n        doctorsData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении докторов:', error);\r\n    }\r\n};\r\n\r\nconst fetchCaseById = async (id: string) => {\r\n    const token = getAuthToken();\r\n    try {\r\n        const response = await axios.get(`${casesApi}/${id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        selectedCase.value = response.data;\r\n        selectedPriceIds.value = response.data.price.map((p: Prices) => p.id);\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейса:', error);\r\n    }\r\n};\r\n\r\nconst selectCase = (item: Case) => {\r\n    fetchCaseById(item.id);\r\n};\r\n\r\nconst cancelEdit = () => {\r\n    selectedCase.value = null;\r\n};\r\n\r\nconst handleFileChange = (event: Event) => {\r\n    const target = event.target as HTMLInputElement;\r\n    if (target.files && target.files.length > 0) {\r\n        selectedFile.value = target.files[0];\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            imagePreview.value = e.target?.result as string;\r\n        };\r\n        reader.readAsDataURL(selectedFile.value);\r\n    }\r\n};\r\n\r\nconst uploadImage = async (): Promise<string | null> => {\r\n    const token = getAuthToken();\r\n    if (!selectedFile.value) return null;\r\n\r\n    const formData = new FormData();\r\n    formData.append('path', selectedFile.value);\r\n    formData.append('isTitle', 'false');\r\n\r\n    try {\r\n        const response = await axios.post(caseImagesApi, formData, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n        });\r\n        console.log('Изображение успешно загружено:', response.data);\r\n        imagePreview.value = null;\r\n        return response.data.id;\r\n    } catch (error) {\r\n        console.error('Ошибка при загрузке изображения:', error);\r\n        return null;\r\n    }\r\n};\r\n\r\nconst setTitleImage = async (imageId: string): Promise<void> => {\r\n    const token = getAuthToken();\r\n    if (!token) return;\r\n\r\n    try {\r\n        const images = selectedCase.value?.images || [];\r\n        await Promise.all(\r\n            images.map(async (img) => {\r\n                if (img.id !== imageId) {\r\n                    await axios.patch(`http://5.35.90.116:8000/images/${img.id}`, { isTitle: false }, {\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    });\r\n                }\r\n            })\r\n        );\r\n        await axios.patch(`http://5.35.90.116:8000/images/${imageId}`, { isTitle: true }, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        console.log(`Титульное изображение обновлено для ID: ${imageId}`);\r\n    } catch (error) {\r\n        console.error('Ошибка при обновлении титульного изображения:', error);\r\n    }\r\n};\r\n\r\nconst deleteImage = async (imageId: string) => {\r\n    if (selectedCase.value) {\r\n        const token = getAuthToken();\r\n\r\n        selectedCase.value.images = selectedCase.value.images.filter(img => img.id !== imageId);\r\n        try {\r\n            await axios.delete(`http://5.35.90.116:8000/images/${imageId}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n        } catch (error) {\r\n            console.error('Ошибка при удалении изображения с сервера:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst saveChanges = async () => {\r\n    const token = getAuthToken();\r\n\r\n    let uploadedImageId: string | null = null;\r\n    if (selectedFile.value) {\r\n        uploadedImageId = await uploadImage();\r\n    }\r\n\r\n    if (selectedCase.value) {\r\n        const dataToSend = {\r\n            name: selectedCase.value.name,\r\n            category: selectedCase.value.category,\r\n            introduction: selectedCase.value.introduction,\r\n            diagnos: selectedCase.value.diagnos,\r\n            treatment: selectedCase.value.treatment,\r\n            totalCost: selectedCase.value.totalCost,\r\n            slug: selectedCase.value.slug,\r\n            doctor_id: selectedCase.value.doctor?.id,\r\n            price_id: selectedPriceIds.value,\r\n            images_id: [...selectedCase.value.images.map(img => img.id), uploadedImageId].filter(Boolean),\r\n        };\r\n\r\n        try {\r\n            await axios.put(`${casesApi}/${selectedCase.value.id}`, dataToSend, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n            console.log('Изменения успешно сохранены для кейса:', selectedCase.value);\r\n            cancelEdit();\r\n            await fetchCases();\r\n        } catch (error) {\r\n            console.error('Ошибка при сохранении изменений:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst deleteCase = async (caseId: string) => {\r\n    const token = getAuthToken();\r\n    try {\r\n        await axios.delete(`${casesApi}/${caseId}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        console.log(`Кейс с ID ${caseId} успешно удален`);\r\n        await fetchCases();\r\n    } catch (error) {\r\n        console.error('Ошибка при удалении кейса:', error);\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    fetchCases();\r\n    fetchPrices();\r\n    fetchDoctors();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createVNode(_unref(Heading), {\n      tagName: \"h2\",\n      size: \"xl\"\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Кейсы клиники\")\n      ]),\n      _: 1\n    }),\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      (!isAdding.value)\n        ? (_openBlock(), _createBlock(_unref(Button), {\n            key: 0,\n            class: \"results__add-button\",\n            tagName: \"button\",\n            size: \"xs\",\n            color: \"green\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\" добавить новый кейс \")\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      (selectedCase.value)\n        ? (_openBlock(), _createElementBlock(\"form\", _hoisted_4, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _hoisted_6,\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(selectedCase.value.images, (image) => {\n                  return (_openBlock(), _createElementBlock(\"li\", {\n                    key: image.id\n                  }, [\n                    _createElementVNode(\"img\", {\n                      src: image.path,\n                      alt: \"Case Image\",\n                      style: {\"width\":\"100px\",\"height\":\"auto\"}\n                    }, null, 8, _hoisted_7),\n                    _createElementVNode(\"p\", null, [\n                      _createTextVNode(\"Сделать титульным \"),\n                      _createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        checked: image.isTitle,\n                        onChange: ($event: any) => (setTitleImage(image.id))\n                      }, null, 40, _hoisted_8)\n                    ]),\n                    _createVNode(_unref(Button), {\n                      tagName: \"button\",\n                      size: \"xs\",\n                      color: \"red\",\n                      onClick: ($event: any) => (deleteImage(image.id))\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"Удалить\")\n                      ]),\n                      _: 2\n                    }, 1032, [\"onClick\"])\n                  ]))\n                }), 128))\n              ]),\n              _createElementVNode(\"div\", _hoisted_9, [\n                _hoisted_10,\n                _createElementVNode(\"input\", {\n                  type: \"file\",\n                  id: \"image-upload\",\n                  onChange: handleFileChange,\n                  accept: \"image/*\"\n                }, null, 32),\n                (imagePreview.value)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                      _hoisted_12,\n                      _createElementVNode(\"img\", {\n                        src: imagePreview.value,\n                        alt: \"Image Preview\",\n                        style: {\"max-width\":\"200px\",\"max-height\":\"200px\"}\n                      }, null, 8, _hoisted_13)\n                    ]))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_unref(Button), {\n                  tagName: \"button\",\n                  size: \"xs\",\n                  color: \"accent\",\n                  onClick: uploadImage,\n                  disabled: !selectedFile.value\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Загрузить изображение\")\n                  ]),\n                  _: 1\n                }, 8, [\"disabled\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_14, [\n              _hoisted_15,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-name\",\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedCase.value.name) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.name]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_16, [\n              _hoisted_17,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-category\",\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedCase.value.category) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.category]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_18, [\n              _hoisted_19,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-introduction\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedCase.value.introduction) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.introduction]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_20, [\n              _hoisted_21,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-diagnos\",\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((selectedCase.value.diagnos) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.diagnos]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_22, [\n              _hoisted_23,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-treatment\",\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((selectedCase.value.treatment) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.treatment]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _hoisted_25,\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                id: \"case-total-cost\",\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((selectedCase.value.totalCost) = $event))\n              }, null, 512), [\n                [\n                  _vModelText,\n                  selectedCase.value.totalCost,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_26, [\n              _hoisted_27,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-slug\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((selectedCase.value.slug) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.slug]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_28, [\n              _hoisted_29,\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((selectedCase.value.doctor.id) = $event))\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(doctorsData.value, (doctor) => {\n                  return (_openBlock(), _createElementBlock(\"option\", {\n                    key: doctor.id,\n                    value: doctor.id\n                  }, _toDisplayString(doctor.firstName) + \" \" + _toDisplayString(doctor.lastName), 9, _hoisted_30))\n                }), 128))\n              ], 512), [\n                [_vModelSelect, selectedCase.value.doctor.id]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_31, [\n              _hoisted_32,\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pricesData.value, (price) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: price.id\n                }, [\n                  _withDirectives(_createElementVNode(\"input\", {\n                    type: \"checkbox\",\n                    value: price.id,\n                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((selectedPriceIds).value = $event))\n                  }, null, 8, _hoisted_33), [\n                    [_vModelCheckbox, selectedPriceIds.value]\n                  ]),\n                  _createTextVNode(\" \" + _toDisplayString(price.name) + \" - \" + _toDisplayString(price.price), 1)\n                ]))\n              }), 128))\n            ]),\n            _createElementVNode(\"div\", _hoisted_34, [\n              _createVNode(_unref(Button), {\n                tagName: \"button\",\n                size: \"xs\",\n                color: \"green\",\n                onClick: saveChanges\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Сохранить изменения\")\n                ]),\n                _: 1\n              }),\n              _createVNode(_unref(Button), {\n                tagName: \"button\",\n                size: \"xs\",\n                color: \"white\",\n                onClick: cancelEdit\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Отмена\")\n                ]),\n                _: 1\n              })\n            ])\n          ]))\n        : (_openBlock(), _createElementBlock(\"ul\", _hoisted_35, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(casesData.value, (item) => {\n              return (_openBlock(), _createElementBlock(\"li\", {\n                key: item.id,\n                class: \"case-item\"\n              }, [\n                _createVNode(_unref(Paragraph), {\n                  tagName: \"p\",\n                  size: \"xxl\",\n                  color: \"dark\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(item.name), 1)\n                  ]),\n                  _: 2\n                }, 1024),\n                _createElementVNode(\"span\", {\n                  onClick: ($event: any) => (selectCase(item))\n                }, [\n                  _createVNode(_unref(Icon), {\n                    type: \"edit\",\n                    color: \"dark\"\n                  })\n                ], 8, _hoisted_36),\n                _createElementVNode(\"span\", {\n                  onClick: ($event: any) => (deleteCase(item.id))\n                }, [\n                  _createVNode(_unref(Icon), {\n                    type: \"delete\",\n                    color: \"red\"\n                  })\n                ], 8, _hoisted_37)\n              ]))\n            }), 128))\n          ]))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { Heading } from '@/shared/ui/text/heading';\r\nimport { Button } from '@/shared/ui/button'\r\nimport { Icon } from '@/shared/ui/icons'\r\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\nimport { Prices } from '@/entities/price/model/price.types'\r\n\r\ninterface Image {\r\n    id: string;\r\n    path: string;\r\n    isTitle: boolean;\r\n}\r\n\r\n\r\ninterface Doctor {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    middleName: string;\r\n}\r\n\r\ninterface Case {\r\n    id: string;\r\n    name: string;\r\n    category: string;\r\n    introduction: string;\r\n    diagnos: string;\r\n    treatment: string;\r\n    totalCost: number;\r\n    slug: string;\r\n    images: Image[];\r\n    price: Prices[];\r\n    doctor: Doctor;\r\n}\r\n\r\nconst casesData = ref<Case[]>([]);\r\nconst pricesData = ref<Prices[]>([]);\r\nconst doctorsData = ref<Doctor[]>([]);\r\nconst selectedCase = ref<Case | null>(null);\r\nconst selectedPriceIds = ref<string[]>([]);\r\nconst imagePreview = ref<string | null>(null);\r\nconst selectedFile = ref<File | null>(null);\r\nconst isAdding = ref(false);\r\n\r\nconst casesApi = 'http://5.35.90.116:8000/cases';\r\nconst caseImagesApi = 'http://5.35.90.116:8000/images';\r\n\r\nconst getAuthToken = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n        console.error('Токен отсутствует');\r\n        return null;\r\n    }\r\n    return token;\r\n};\r\n\r\nconst fetchCases = async () => {\r\n    try {\r\n        const response = await axios.get(casesApi);\r\n        casesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейсов:', error);\r\n    }\r\n};\r\n\r\nconst fetchPrices = async () => {\r\n    try {\r\n        const response = await axios.get('http://5.35.90.116:8000/prices');\r\n        pricesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении цен:', error);\r\n    }\r\n};\r\n\r\nconst fetchDoctors = async () => {\r\n    try {\r\n        const response = await axios.get('http://5.35.90.116:8000/doctors');\r\n        doctorsData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении докторов:', error);\r\n    }\r\n};\r\n\r\nconst fetchCaseById = async (id: string) => {\r\n    const token = getAuthToken();\r\n    try {\r\n        const response = await axios.get(`${casesApi}/${id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        selectedCase.value = response.data;\r\n        selectedPriceIds.value = response.data.price.map((p: Prices) => p.id);\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейса:', error);\r\n    }\r\n};\r\n\r\nconst selectCase = (item: Case) => {\r\n    fetchCaseById(item.id);\r\n};\r\n\r\nconst cancelEdit = () => {\r\n    selectedCase.value = null;\r\n};\r\n\r\nconst handleFileChange = (event: Event) => {\r\n    const target = event.target as HTMLInputElement;\r\n    if (target.files && target.files.length > 0) {\r\n        selectedFile.value = target.files[0];\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            imagePreview.value = e.target?.result as string;\r\n        };\r\n        reader.readAsDataURL(selectedFile.value);\r\n    }\r\n};\r\n\r\nconst uploadImage = async (): Promise<string | null> => {\r\n    const token = getAuthToken();\r\n    if (!selectedFile.value) return null;\r\n\r\n    const formData = new FormData();\r\n    formData.append('path', selectedFile.value);\r\n    formData.append('isTitle', 'false');\r\n\r\n    try {\r\n        const response = await axios.post(caseImagesApi, formData, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n        });\r\n        console.log('Изображение успешно загружено:', response.data);\r\n        imagePreview.value = null;\r\n        return response.data.id;\r\n    } catch (error) {\r\n        console.error('Ошибка при загрузке изображения:', error);\r\n        return null;\r\n    }\r\n};\r\n\r\nconst setTitleImage = async (imageId: string): Promise<void> => {\r\n    const token = getAuthToken();\r\n    if (!token) return;\r\n\r\n    try {\r\n        const images = selectedCase.value?.images || [];\r\n        await Promise.all(\r\n            images.map(async (img) => {\r\n                if (img.id !== imageId) {\r\n                    await axios.patch(`http://5.35.90.116:8000/images/${img.id}`, { isTitle: false }, {\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    });\r\n                }\r\n            })\r\n        );\r\n        await axios.patch(`http://5.35.90.116:8000/images/${imageId}`, { isTitle: true }, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        console.log(`Титульное изображение обновлено для ID: ${imageId}`);\r\n    } catch (error) {\r\n        console.error('Ошибка при обновлении титульного изображения:', error);\r\n    }\r\n};\r\n\r\nconst deleteImage = async (imageId: string) => {\r\n    if (selectedCase.value) {\r\n        const token = getAuthToken();\r\n\r\n        selectedCase.value.images = selectedCase.value.images.filter(img => img.id !== imageId);\r\n        try {\r\n            await axios.delete(`http://5.35.90.116:8000/images/${imageId}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n        } catch (error) {\r\n            console.error('Ошибка при удалении изображения с сервера:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst saveChanges = async () => {\r\n    const token = getAuthToken();\r\n\r\n    let uploadedImageId: string | null = null;\r\n    if (selectedFile.value) {\r\n        uploadedImageId = await uploadImage();\r\n    }\r\n\r\n    if (selectedCase.value) {\r\n        const dataToSend = {\r\n            name: selectedCase.value.name,\r\n            category: selectedCase.value.category,\r\n            introduction: selectedCase.value.introduction,\r\n            diagnos: selectedCase.value.diagnos,\r\n            treatment: selectedCase.value.treatment,\r\n            totalCost: selectedCase.value.totalCost,\r\n            slug: selectedCase.value.slug,\r\n            doctor_id: selectedCase.value.doctor?.id,\r\n            price_id: selectedPriceIds.value,\r\n            images_id: [...selectedCase.value.images.map(img => img.id), uploadedImageId].filter(Boolean),\r\n        };\r\n\r\n        try {\r\n            await axios.put(`${casesApi}/${selectedCase.value.id}`, dataToSend, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n            console.log('Изменения успешно сохранены для кейса:', selectedCase.value);\r\n            cancelEdit();\r\n            await fetchCases();\r\n        } catch (error) {\r\n            console.error('Ошибка при сохранении изменений:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst deleteCase = async (caseId: string) => {\r\n    const token = getAuthToken();\r\n    try {\r\n        await axios.delete(`${casesApi}/${caseId}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        console.log(`Кейс с ID ${caseId} успешно удален`);\r\n        await fetchCases();\r\n    } catch (error) {\r\n        console.error('Ошибка при удалении кейса:', error);\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    fetchCases();\r\n    fetchPrices();\r\n    fetchDoctors();\r\n});\r\n</script>\r\n\r\n<template>\r\n    <section class=\"admin-cases\">\r\n        <Heading tagName=\"h2\" size=\"xl\">Кейсы клиники</Heading>\r\n        <hr>\r\n        <div class=\"cases__content\">\r\n            <Button class=\"results__add-button\" tagName=\"button\" size=\"xs\" color=\"green\" \r\n                v-if=\"!isAdding\">\r\n                добавить новый кейс\r\n            </Button>\r\n            <template v-if=\"selectedCase\">\r\n                <form class=\"cases-form\">\r\n                    <div class=\"form-item item-images\">\r\n                        <label>Добавьте изображения кейса:</label>\r\n                        <ul>\r\n                            <li v-for=\"image in selectedCase.images\" :key=\"image.id\">\r\n                                <img :src=\"image.path\" alt=\"Case Image\" style=\"width: 100px; height: auto;\" />\r\n                                <p>Сделать титульным\r\n                                    <input type=\"checkbox\" :checked=\"image.isTitle\" @change=\"setTitleImage(image.id)\" />\r\n                                </p>\r\n                                <Button tagName=\"button\" size=\"xs\" color=\"red\"\r\n                                    @click=\"deleteImage(image.id)\">Удалить</Button>\r\n                            </li>\r\n                        </ul>\r\n\r\n                        <div class=\"image-upload-form\">\r\n                            <label for=\"image-upload\">Выберите изображение:</label>\r\n                            <input type=\"file\" id=\"image-upload\" @change=\"handleFileChange\" accept=\"image/*\" />\r\n\r\n                            <div v-if=\"imagePreview\" class=\"image-preview\">\r\n                                <h3>Предварительный просмотр:</h3>\r\n                                <img :src=\"imagePreview\" alt=\"Image Preview\" style=\"max-width: 200px; max-height: 200px;\" />\r\n                            </div>\r\n\r\n                            <Button tagName=\"button\" size=\"xs\" color=\"accent\" @click=\"uploadImage\"\r\n                                :disabled=\"!selectedFile\">Загрузить изображение</Button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-name\">Название кейса:</label>\r\n                        <input id=\"case-name\" v-model=\"selectedCase.name\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-category\">Категория:</label>\r\n                        <input id=\"case-category\" v-model=\"selectedCase.category\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-introduction\">Введение:</label>\r\n                        <textarea id=\"case-introduction\" v-model=\"selectedCase.introduction\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-diagnos\">Диагноз:</label>\r\n                        <textarea id=\"case-diagnos\" v-model=\"selectedCase.diagnos\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-treatment\">Лечение:</label>\r\n                        <textarea id=\"case-treatment\" v-model=\"selectedCase.treatment\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-total-cost\">Общая стоимость:</label>\r\n                        <input type=\"number\" id=\"case-total-cost\" v-model.number=\"selectedCase.totalCost\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-slug\">Slug:</label>\r\n                        <input id=\"case-slug\" v-model=\"selectedCase.slug\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label>Доктор:</label>\r\n                        <select v-model=\"selectedCase.doctor.id\">\r\n                            <option v-for=\"doctor in doctorsData\" :key=\"doctor.id\" :value=\"doctor.id\">{{ doctor.firstName }}\r\n                                {{ doctor.lastName }}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label>Цены:</label>\r\n                        <div v-for=\"price in pricesData\" :key=\"price.id\">\r\n                            <input type=\"checkbox\" :value=\"price.id\" v-model=\"selectedPriceIds\" /> {{ price.name }} - {{\r\n                                price.price }}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-actions\">\r\n                        <Button tagName=\"button\" size=\"xs\" color=\"green\" @click=\"saveChanges\">Сохранить изменения</Button>\r\n                        <Button tagName=\"button\" size=\"xs\" color=\"white\" @click=\"cancelEdit\">Отмена</Button>\r\n                    </div>\r\n                </form>\r\n            </template>\r\n            <template v-else>\r\n                <ul>\r\n                    <li v-for=\"item in casesData\" :key=\"item.id\" class=\"case-item\">\r\n                        <Paragraph tagName=\"p\" size=\"xxl\" color=\"dark\">{{ item.name }}</Paragraph>\r\n                        <span @click=\"selectCase(item)\">\r\n                            <Icon type=\"edit\" color=\"dark\" />\r\n                        </span>\r\n                        <span @click=\"deleteCase(item.id)\">\r\n                            <Icon type=\"delete\" color=\"red\" />\r\n                        </span>\r\n                    </li>\r\n                </ul>\r\n            </template>\r\n        </div>\r\n    </section>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n@import './style.scss';\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c4ad9526&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c4ad9526\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","for","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","casesApi","caseImagesApi","_defineComponent","__name","setup","__props","casesData","ref","pricesData","doctorsData","selectedCase","selectedPriceIds","imagePreview","selectedFile","isAdding","getAuthToken","token","localStorage","getItem","console","error","fetchCases","async","response","axios","get","value","data","fetchPrices","fetchDoctors","fetchCaseById","id","headers","Authorization","price","map","p","selectCase","item","cancelEdit","handleFileChange","event","target","files","length","reader","FileReader","onload","e","result","readAsDataURL","uploadImage","formData","FormData","append","post","log","setTitleImage","images","Promise","all","img","imageId","patch","isTitle","deleteImage","filter","delete","saveChanges","uploadedImageId","dataToSend","name","category","introduction","diagnos","treatment","totalCost","slug","doctor_id","doctor","price_id","images_id","Boolean","put","deleteCase","caseId","onMounted","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","Heading","tagName","size","default","_withCtx","_createTextVNode","_","_createCommentVNode","_createBlock","Button","color","_Fragment","_renderList","image","src","path","alt","style","type","checked","onChange","$event","onClick","accept","disabled","_withDirectives","_vModelText","number","_toDisplayString","firstName","lastName","_vModelSelect","_vModelCheckbox","Paragraph","Icon","__exports__"],"sourceRoot":""}