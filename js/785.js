"use strict";(self["webpackChunkdental_blade"]=self["webpackChunkdental_blade"]||[]).push([[785],{4785:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});var t=l(641),s=l(953),o=l(3751),n=l(33),i=l(4335),c=l(4853),u=l(4176);const d=e=>((0,t.Qi)("data-v-7dc1188f"),e=e(),(0,t.jt)(),e),r={class:"admin-cases"},k=d((()=>(0,t.Lk)("hr",null,null,-1))),m={class:"cases__content"},p={key:0,class:"cases-form"},v={class:"form-item item-images"},L=d((()=>(0,t.Lk)("label",null,"Добавьте изображения кейса:",-1))),f=["src"],b=["checked","onChange"],g={class:"form-item"},h=d((()=>(0,t.Lk)("label",{for:"case-name"},"Название кейса:",-1))),y={class:"form-item"},C=d((()=>(0,t.Lk)("label",{for:"case-category"},"Категория:",-1))),_={class:"form-item"},E=d((()=>(0,t.Lk)("label",{for:"case-description"},"Вводная часть:",-1))),w={class:"form-item"},X=d((()=>(0,t.Lk)("label",{for:"case-diagnos"},"Диагноз:",-1))),x={class:"form-item"},U=d((()=>(0,t.Lk)("label",{for:"case-treatment"},"Лечение:",-1))),V={class:"form-item"},R=d((()=>(0,t.Lk)("label",{for:"case-total-cost"},"Общая стоимость:",-1))),A={class:"form-item item-prices"},F=d((()=>(0,t.Lk)("label",null,"Выберите оказанные услуги из списка",-1))),I=["value"],J={key:1,class:"cases-list"},K=["onClick"];var T=(0,t.pM)({__name:"index",setup(e){const a=(0,s.KR)([]),l=(0,s.KR)([]),d=(0,s.KR)(null),T=async()=>{try{const e=await i.A.get("/cases");a.value=e.data}catch(e){console.error("Ошибка при получении кейсов:",e)}},W=async()=>{try{const e=await i.A.get("/prices");l.value=e.data}catch(e){console.error("Ошибка при получении цен:",e)}},z=async e=>{try{const a=await i.A.get(`/cases${e}`);d.value=a.data}catch(a){console.error("Ошибка при получении кейса:",a)}},D=async()=>{if(d.value)try{await i.A.put(`/cases/${d.value.id}`,d.value),console.log("Изменения успешно сохранены для кейса:",d.value),$(),await T()}catch(e){console.error("Ошибка при сохранении изменений:",e)}},N=e=>{z(e.id)},$=()=>{d.value=null},j=e=>{const a=e.target,l=a.files?a.files[0]:null;if(l){const e=new FileReader;e.onload=e=>{const a={id:d.value?.images.length??0,path:e.target?.result,isTitle:!1};d.value?.images.push(a)},e.readAsDataURL(l)}},H=e=>{d.value?.images.forEach((e=>e.isTitle=!1)),e.isTitle=!0};return(0,t.sV)((()=>{T(),W()})),(e,i)=>((0,t.uX)(),(0,t.CE)("section",r,[(0,t.bF)((0,s.R1)(c.D),{tagName:"h2",size:"xl"},{default:(0,t.k6)((()=>[(0,t.eW)("Кейсы клиники")])),_:1}),k,(0,t.Lk)("div",m,[d.value?((0,t.uX)(),(0,t.CE)("form",p,[(0,t.Lk)("div",v,[L,(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value.images,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.id},[(0,t.Lk)("img",{src:e.path,alt:"",style:{width:"100px",height:"auto"}},null,8,f),(0,t.Lk)("p",null,[(0,t.eW)("Сделать титульным "),(0,t.Lk)("input",{type:"checkbox",checked:e.isTitle,onChange:a=>H(e)},null,40,b)])])))),128))]),(0,t.Lk)("input",{type:"file",onChange:j,accept:"image/*"},null,32)]),(0,t.Lk)("div",g,[h,(0,t.bo)((0,t.Lk)("input",{id:"case-name","onUpdate:modelValue":i[0]||(i[0]=e=>d.value.name=e)},null,512),[[o.Jo,d.value.name]])]),(0,t.Lk)("div",y,[C,(0,t.bo)((0,t.Lk)("input",{id:"case-category","onUpdate:modelValue":i[1]||(i[1]=e=>d.value.category=e)},null,512),[[o.Jo,d.value.category]])]),(0,t.Lk)("div",_,[E,(0,t.bo)((0,t.Lk)("textarea",{id:"case-description","onUpdate:modelValue":i[2]||(i[2]=e=>d.value.description[0].introduction=e)},null,512),[[o.Jo,d.value.description[0].introduction]])]),(0,t.Lk)("div",w,[X,(0,t.bo)((0,t.Lk)("textarea",{id:"case-diagnos","onUpdate:modelValue":i[3]||(i[3]=e=>d.value.description[0].diagnos=e)},null,512),[[o.Jo,d.value.description[0].diagnos]])]),(0,t.Lk)("div",x,[U,(0,t.bo)((0,t.Lk)("textarea",{id:"case-treatment","onUpdate:modelValue":i[4]||(i[4]=e=>d.value.description[0].treatment=e)},null,512),[[o.Jo,d.value.description[0].treatment]])]),(0,t.Lk)("div",V,[R,(0,t.bo)((0,t.Lk)("input",{id:"case-total-cost",type:"number","onUpdate:modelValue":i[5]||(i[5]=e=>d.value.totalCost=e)},null,512),[[o.Jo,d.value.totalCost]])]),(0,t.Lk)("div",A,[F,(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.value,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.id},[(0,t.Lk)("label",null,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":i[6]||(i[6]=e=>d.value.priceId=e)},null,8,I),[[o.lH,d.value.priceId]]),(0,t.eW)(" "+(0,n.v_)(e.name),1)])])))),128))])]),(0,t.Lk)("div",{class:"buttons"},[(0,t.Lk)("button",{type:"button",onClick:D},"Сохранить"),(0,t.Lk)("button",{type:"button",onClick:$},"Отменить")])])):((0,t.uX)(),(0,t.CE)("ul",J,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.id,class:"list__item",onClick:a=>N(e)},[(0,t.bF)((0,s.R1)(u.f),{tagName:"p",size:"m",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.name),1)])),_:2},1024)],8,K)))),128))]))])]))}}),W=l(6262);const z=(0,W.A)(T,[["__scopeId","data-v-7dc1188f"]]);var D=z}}]);
//# sourceMappingURL=785.js.map