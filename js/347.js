"use strict";(self["webpackChunkdental_blade"]=self["webpackChunkdental_blade"]||[]).push([[347],{2347:function(e,l,a){a.r(l),a.d(l,{default:function(){return D}});var t=a(641),o=a(953),u=a(33),n=a(3751),s=a(4335),i=a(8866),r=a(6583),c=a(2669),d=a(4853),v=a(3532);const p=e=>((0,t.Qi)("data-v-69280cfe"),e=e(),(0,t.jt)(),e),k={class:"admin-questions"},f={class:"admin-header"},b=p((()=>(0,t.Lk)("option",{value:""},"все страницы",-1))),h=["value"],m=p((()=>(0,t.Lk)("hr",null,null,-1))),_={class:"questions__content"},L={key:0,class:"questions__add-form"},g={class:"input-field"},R=p((()=>(0,t.Lk)("label",null,"Вопрос:",-1))),y={class:"input-field"},C=p((()=>(0,t.Lk)("label",null,"Ответ:",-1))),w={class:"input-field"},x=p((()=>(0,t.Lk)("label",null,"Страница:",-1))),F={class:"form__buttons"},q={class:"questions__list"},$={class:"item__content"},z={class:"item__buttons"},N=["onClick"],A=["onClick"],E={key:0,class:"questions__edit-form"},W={class:"input-field"},J=p((()=>(0,t.Lk)("label",null,"Вопрос:",-1))),K={class:"input-field"},V=p((()=>(0,t.Lk)("label",null,"Ответ:",-1))),U={class:"input-field"},X=p((()=>(0,t.Lk)("label",null,"Страница:",-1))),I={class:"form__buttons"};var B=(0,t.pM)({__name:"index",setup(e){const l=(0,o.KR)([]),a=(0,o.KR)(""),p=(0,o.KR)(null),B=(0,o.KR)(""),Q=(0,o.KR)(""),S=(0,o.KR)(""),D=()=>{const e=localStorage.getItem("token");return e||(console.error("Токен отсутствует"),null)},j=async()=>{const e=D();if(e)try{const a=await s.A.get("http://5.35.90.116:8000/questions",{headers:{Authorization:`Bearer ${e}`}});l.value=a.data}catch(a){console.error("Ошибка при получении вопросов:",a)}else console.error("Невозможно получить вопросы, так как отсутствует токен.")},M=(0,t.EW)((()=>a.value?l.value.filter((e=>e.slug===a.value)):l.value)),G=(0,t.EW)((()=>{const e=i.J.find((e=>"/"===e.path)),l=i.J.find((e=>"/services"===e.path)),a=l?.children?.filter((e=>""!==e.path))||[];return[e&&{name:e.name,path:e.path},...a.map((e=>({name:e.name,path:`/services/${e.path}`})))].filter(Boolean)})),H=e=>{p.value=e.id,B.value=e.answer,Q.value=e.question,S.value=e.slug},O=()=>{p.value=null,B.value="",Q.value="",S.value=""},P=async()=>{const e=D();if(!e)return void console.error("Невозможно сохранить вопрос, так как отсутствует токен.");const l={id:p.value||"",answer:B.value,question:Q.value,slug:S.value||a.value||""};try{p.value&&"new"!==p.value?await s.A.put(`http://5.35.90.116:8000/questions/${p.value}`,l,{headers:{Authorization:`Bearer ${e}`}}):await s.A.post("http://5.35.90.116:8000/questions",l,{headers:{Authorization:`Bearer ${e}`}}),console.log("Данные успешно сохранены"),await j(),O()}catch(t){console.error("Ошибка при сохранении данных:",t)}},T=async e=>{const l=D(),a=window.confirm("Вы уверены, что хотите удалить этот результат?");if(a)try{await s.A.delete(`http://5.35.90.116:8000/questions/${e}`,{headers:{Authorization:`Bearer ${l}`}}),console.log("Вопрос удален"),await j()}catch(t){console.error("Ошибка при удалении вопроса:",t)}},Y=()=>{p.value="new",Q.value="",B.value="",S.value=a.value||""};return(0,t.sV)((()=>{j()})),(e,l)=>((0,t.uX)(),(0,t.CE)("section",k,[(0,t.Lk)("div",f,[(0,t.bF)((0,o.R1)(d.D),{tagName:"h2",size:"xl"},{default:(0,t.k6)((()=>[(0,t.eW)("часто задаваемые вопросы")])),_:1}),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),class:"slug-select"},[b,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(G.value,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e?.path,value:e?.path},(0,u.v_)(e?.name),9,h)))),128))],512),[[n.u1,a.value]])]),m,(0,t.Lk)("div",_,[(0,t.bF)((0,o.R1)(r.$),{tagName:"button",size:"xs",color:"green",onClick:Y,class:"add-question-btn"},{default:(0,t.k6)((()=>[(0,t.eW)(" добавить вопрос ")])),_:1}),"new"===p.value?((0,t.uX)(),(0,t.CE)("form",L,[(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>Q.value=e),placeholder:"Какие услуги предоставляет ваша клиника?"},null,512),[[n.Jo,Q.value]]),R]),(0,t.Lk)("div",y,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),placeholder:"Напишите свой ответ здесь"},null,512),[[n.Jo,B.value]]),C]),(0,t.Lk)("div",w,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>S.value=e),placeholder:"Slug"},null,512),[[n.Jo,S.value]]),x]),(0,t.Lk)("div",F,[(0,t.bF)((0,o.R1)(r.$),{tagName:"button",size:"xs",color:"green",onClick:P},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(v.f),{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Сохранить ")])),_:1})])),_:1}),(0,t.bF)((0,o.R1)(r.$),{tagName:"button",size:"xs",color:"white",onClick:O},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(v.f),{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Отмена ")])),_:1})])),_:1})])])):(0,t.Q3)("",!0),(0,t.Lk)("ul",q,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(M.value,((e,a)=>((0,t.uX)(),(0,t.CE)("li",{key:e.id,class:"item"},[(0,t.Lk)("div",$,[(0,t.bF)((0,o.R1)(v.f),{tagName:"p",size:"xl",color:"dark",class:"item__text"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.question),1)])),_:2},1024),(0,t.Lk)("div",z,[(0,t.Lk)("span",{onClick:l=>H(e)},[(0,t.bF)((0,o.R1)(c.I),{type:"edit",color:"dark"})],8,N),(0,t.Lk)("span",{onClick:(0,n.D$)((l=>T(e.id)),["prevent"])},[(0,t.bF)((0,o.R1)(c.I),{type:"delete",color:"red"})],8,A)])]),p.value===e.id?((0,t.uX)(),(0,t.CE)("form",E,[(0,t.Lk)("div",W,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>Q.value=e),placeholder:"Вопрос"},null,512),[[n.Jo,Q.value]]),J]),(0,t.Lk)("div",K,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=e=>B.value=e),placeholder:"Ответ"},null,512),[[n.Jo,B.value]]),V]),(0,t.Lk)("div",U,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>S.value=e),placeholder:"Slug"},null,512),[[n.Jo,S.value]]),X]),(0,t.Lk)("div",I,[(0,t.bF)((0,o.R1)(r.$),{tagName:"button",size:"xs",color:"green",onClick:P},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(v.f),{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Сохранить ")])),_:1})])),_:1}),(0,t.bF)((0,o.R1)(r.$),{tagName:"button",size:"xs",color:"white",onClick:O},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(v.f),{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Отмена ")])),_:1})])),_:1})])])):(0,t.Q3)("",!0)])))),128))])])]))}}),Q=a(6262);const S=(0,Q.A)(B,[["__scopeId","data-v-69280cfe"]]);var D=S}}]);
//# sourceMappingURL=347.js.map