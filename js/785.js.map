{"version":3,"file":"js/785.js","mappings":"0OAGA,MAAMA,EAAgBC,KAAYC,EAAAA,EAAAA,IAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,MAAcF,GAChFG,EAAa,CAAEC,MAAO,eACtBC,EAA2BN,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,KAAM,KAAM,MAAO,KAClGC,EAAa,CAAEH,MAAO,kBACtBI,EAAa,CACjBC,IAAK,EACLL,MAAO,cAEHM,EAAa,CAAEN,MAAO,yBACtBO,EAA2BZ,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,KAAM,+BAAgC,KAC9HM,EAAa,CAAC,OACdC,EAAa,CAAC,UAAW,YACzBC,EAAa,CAAEV,MAAO,aACtBW,EAA4BhB,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,aAAe,mBAAoB,KACnIC,EAAc,CAAEb,MAAO,aACvBc,EAA4BnB,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,iBAAmB,cAAe,KAClIG,EAAc,CAAEf,MAAO,aACvBgB,EAA4BrB,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,oBAAsB,kBAAmB,KACzIK,EAAc,CAAEjB,MAAO,aACvBkB,EAA4BvB,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,gBAAkB,YAAa,KAC/HO,EAAc,CAAEnB,MAAO,aACvBoB,EAA4BzB,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,kBAAoB,YAAa,KACjIS,EAAc,CAAErB,MAAO,aACvBsB,EAA4B3B,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,CAAEU,IAAK,mBAAqB,oBAAqB,KAC1IW,EAAc,CAAEvB,MAAO,yBACvBwB,EAA4B7B,GAAa,KAAmBO,EAAAA,EAAAA,IAAoB,QAAS,KAAM,uCAAwC,KACvIuB,EAAc,CAAC,SACfC,EAAc,CAClBrB,IAAK,EACLL,MAAO,cAEH2B,EAAc,CAAC,WAkBrB,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,QACRC,KAAAA,CAAMC,GCtCR,MAAMC,GAAYC,EAAAA,EAAAA,IAAY,IACxBC,GAAaD,EAAAA,EAAAA,IAAW,IACxBE,GAAeF,EAAAA,EAAAA,IAAiB,MAEhCG,EAAaC,UACf,IACI,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,UACjCR,EAAUS,MAAQH,EAASI,IAC/B,CAAE,MAAOC,GACLC,QAAQD,MAAM,+BAAgCA,EAClD,GAGEE,EAAcR,UAChB,IACI,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,WACjCN,EAAWO,MAAQH,EAASI,IAChC,CAAE,MAAOC,GACLC,QAAQD,MAAM,4BAA6BA,EAC/C,GAGEG,EAAgBT,UAClB,IACI,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,SAASO,KAC1CZ,EAAaM,MAAQH,EAASI,IAClC,CAAE,MAAOC,GACLC,QAAQD,MAAM,8BAA+BA,EACjD,GAGEK,EAAcX,UAChB,GAAIF,EAAaM,MACb,UACUF,EAAAA,EAAMU,IAAI,UAAUd,EAAaM,MAAMM,KAAMZ,EAAaM,OAChEG,QAAQM,IAAI,yCAA0Cf,EAAaM,OACnEU,UACMf,GACV,CAAE,MAAOO,GACLC,QAAQD,MAAM,mCAAoCA,EACtD,CACJ,EAGES,EAAcC,IAChBP,EAAcO,EAAKN,GAAG,EAGpBI,EAAaA,KACfhB,EAAaM,MAAQ,IAAI,EAGvBa,EAAeC,IACjB,MAAMC,EAASD,EAAMC,OACfC,EAAOD,EAAOE,MAAQF,EAAOE,MAAM,GAAK,KAC9C,GAAID,EAAM,CACN,MAAME,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IACb,MAAMC,EAAiB,CACnBhB,GAAIZ,EAAaM,OAAOuB,OAAOC,QAAU,EACzCC,KAAMJ,EAAEN,QAAQW,OAChBC,SAAS,GAEbjC,EAAaM,OAAOuB,OAAOK,KAAKN,EAAe,EAEnDJ,EAAOW,cAAcb,EACzB,GAGEc,EAAiBC,IACnBrC,EAAaM,OAAOuB,OAAOS,SAAQC,GAAOA,EAAIN,SAAU,IACxDI,EAAMJ,SAAU,CAAI,EDgDxB,OC7CAO,EAAAA,EAAAA,KAAU,KACNvC,IACAS,GAAa,ID2CV,CAAC+B,EAAUC,MACRC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,UAAWhF,EAAY,EAC/DiF,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,IAAOC,EAAAA,GAAU,CAC5BC,QAAS,KACTC,KAAM,MACL,CACDC,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,oBAEnBC,EAAG,IAELvF,GACAC,EAAAA,EAAAA,IAAoB,MAAOC,EAAY,CACpCgC,EAAaM,QACTqC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ3E,EAAY,EACrDF,EAAAA,EAAAA,IAAoB,MAAOI,EAAY,CACrCC,GACAL,EAAAA,EAAAA,IAAoB,KAAM,KAAM,GAC7B4E,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBU,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAYvD,EAAaM,MAAMuB,QAASQ,KACtFM,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,KAAM,CAC9C1E,IAAKmE,EAAMzB,IACV,EACD7C,EAAAA,EAAAA,IAAoB,MAAO,CACzByF,IAAKnB,EAAMN,KACX0B,IAAK,GACLC,MAAO,CAAC,MAAQ,QAAQ,OAAS,SAChC,KAAM,EAAGrF,IACZN,EAAAA,EAAAA,IAAoB,IAAK,KAAM,EAC7BqF,EAAAA,EAAAA,IAAiB,uBACjBrF,EAAAA,EAAAA,IAAoB,QAAS,CAC3B4F,KAAM,WACNC,QAASvB,EAAMJ,QACf4B,SAAWC,GAAiB1B,EAAcC,IACzC,KAAM,GAAI/D,UAGf,SAENP,EAAAA,EAAAA,IAAoB,QAAS,CAC3B4F,KAAM,OACNE,SAAU1C,EACV4C,OAAQ,WACP,KAAM,OAEXhG,EAAAA,EAAAA,IAAoB,MAAOQ,EAAY,CACrCC,GACAwF,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,QAAS,CAC3C6C,GAAI,YACJ,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAM2D,KAAQH,IAC9F,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAM2D,WAGrClG,EAAAA,EAAAA,IAAoB,MAAOW,EAAa,CACtCC,GACAqF,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,QAAS,CAC3C6C,GAAI,gBACJ,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAM6D,SAAYL,IAClG,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAM6D,eAGrCpG,EAAAA,EAAAA,IAAoB,MAAOa,EAAa,CACtCC,GACAmF,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,WAAY,CAC9C6C,GAAI,mBACJ,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAM8D,YAAY,GAAGC,aAAgBP,IACrH,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAM8D,YAAY,GAAGC,mBAGpDtG,EAAAA,EAAAA,IAAoB,MAAOe,EAAa,CACtCC,GACAiF,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,WAAY,CAC9C6C,GAAI,eACJ,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAM8D,YAAY,GAAGE,QAAWR,IAChH,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAM8D,YAAY,GAAGE,cAGpDvG,EAAAA,EAAAA,IAAoB,MAAOiB,EAAa,CACtCC,GACA+E,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,WAAY,CAC9C6C,GAAI,iBACJ,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAM8D,YAAY,GAAGG,UAAaT,IAClH,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAM8D,YAAY,GAAGG,gBAGpDxG,EAAAA,EAAAA,IAAoB,MAAOmB,EAAa,CACtCC,GACA6E,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,QAAS,CAC3C6C,GAAI,kBACJ+C,KAAM,SACN,sBAAuBjB,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAMkE,UAAaV,IACnG,KAAM,KAAM,CACb,CAACI,EAAAA,GAAalE,EAAaM,MAAMkE,gBAGrCzG,EAAAA,EAAAA,IAAoB,MAAOqB,EAAa,CACtCC,GACAtB,EAAAA,EAAAA,IAAoB,KAAM,KAAM,GAC7B4E,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBU,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAYxD,EAAWO,OAAQmE,KAC7E9B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,KAAM,CAC9C1E,IAAKuG,EAAQ7D,IACZ,EACD7C,EAAAA,EAAAA,IAAoB,QAAS,KAAM,EACjCiG,EAAAA,EAAAA,KAAgBjG,EAAAA,EAAAA,IAAoB,QAAS,CAC3C4F,KAAM,WACNrD,MAAOmE,EAAQ7D,GACf,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMoB,GAAkB9D,EAAaM,MAAMoE,QAAWZ,IACjG,KAAM,EAAGxE,GAAc,CACxB,CAACqF,EAAAA,GAAiB3E,EAAaM,MAAMoE,YAEvCtB,EAAAA,EAAAA,IAAiB,KAAMwB,EAAAA,EAAAA,IAAiBH,EAAQR,MAAO,UAGzD,WAGRlG,EAAAA,EAAAA,IAAoB,MAAO,CAAEF,MAAO,WAAa,EAC/CE,EAAAA,EAAAA,IAAoB,SAAU,CAC5B4F,KAAM,SACNkB,QAAShE,GACR,cACH9C,EAAAA,EAAAA,IAAoB,SAAU,CAC5B4F,KAAM,SACNkB,QAAS7D,GACR,mBAGN2B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,KAAMrD,EAAa,GACnDoD,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBU,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY1D,EAAUS,OAAQY,KAC5EyB,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,KAAM,CAC9C1E,IAAKgD,EAAKN,GACV/C,MAAO,aACPgH,QAAUf,GAAiB7C,EAAWC,IACrC,EACD2B,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,IAAOgC,EAAAA,GAAY,CAC9B9B,QAAS,IACTC,KAAM,IACN8B,MAAO,QACN,CACD7B,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,KAAiBwB,EAAAA,EAAAA,IAAiB1D,EAAK+C,MAAO,MAEhDZ,EAAG,GACF,OACF,EAAG7D,MACJ,aAKhB,I,UE3RA,MAAMwF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue?88f4","webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue","webpack://dental-blade/./src/pages/admin/ui/admin-cases/index.vue?c653"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-7dc1188f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"admin-cases\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_3 = { class: \"cases__content\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"cases-form\"\n}\nconst _hoisted_5 = { class: \"form-item item-images\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Добавьте изображения кейса:\", -1))\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = [\"checked\", \"onChange\"]\nconst _hoisted_9 = { class: \"form-item\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-name\" }, \"Название кейса:\", -1))\nconst _hoisted_11 = { class: \"form-item\" }\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-category\" }, \"Категория:\", -1))\nconst _hoisted_13 = { class: \"form-item\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-description\" }, \"Вводная часть:\", -1))\nconst _hoisted_15 = { class: \"form-item\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-diagnos\" }, \"Диагноз:\", -1))\nconst _hoisted_17 = { class: \"form-item\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-treatment\" }, \"Лечение:\", -1))\nconst _hoisted_19 = { class: \"form-item\" }\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"case-total-cost\" }, \"Общая стоимость:\", -1))\nconst _hoisted_21 = { class: \"form-item item-prices\" }\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Выберите оказанные услуги из списка\", -1))\nconst _hoisted_23 = [\"value\"]\nconst _hoisted_24 = {\n  key: 1,\n  class: \"cases-list\"\n}\nconst _hoisted_25 = [\"onClick\"]\n\nimport { computed, ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { Heading } from '@/shared/ui/text/heading';\r\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\n\r\ninterface Case {\r\n    id: number;\r\n    name: string;\r\n    category: string;\r\n    description: { introduction: string; diagnos: string; treatment: string }[];\r\n    totalCost: number;\r\n    images: { id: number; path: string; isTitle: boolean }[];\r\n    priceId: number[]; \r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst casesData = ref<Case[]>([]);\r\nconst pricesData = ref<any[]>([]);\r\nconst selectedCase = ref<Case | null>(null); \r\n\r\nconst fetchCases = async () => {\r\n    try {\r\n        const response = await axios.get('/cases');\r\n        casesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейсов:', error);\r\n    }\r\n};\r\n\r\nconst fetchPrices = async () => {\r\n    try {\r\n        const response = await axios.get('/prices');\r\n        pricesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении цен:', error);\r\n    }\r\n};\r\n\r\nconst fetchCaseById = async (id: number) => {\r\n    try {\r\n        const response = await axios.get(`/cases${id}`);\r\n        selectedCase.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейса:', error);\r\n    }\r\n};\r\n\r\nconst saveChanges = async () => {\r\n    if (selectedCase.value) {\r\n        try {\r\n            await axios.put(`/cases/${selectedCase.value.id}`, selectedCase.value);\r\n            console.log('Изменения успешно сохранены для кейса:', selectedCase.value);\r\n            cancelEdit(); \r\n            await fetchCases();\r\n        } catch (error) {\r\n            console.error('Ошибка при сохранении изменений:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst selectCase = (item: Case) => { \r\n    fetchCaseById(item.id);\r\n};\r\n\r\nconst cancelEdit = () => {\r\n    selectedCase.value = null;\r\n};\r\n\r\nconst uploadImage = (event: Event) => {\r\n    const target = event.target as HTMLInputElement;\r\n    const file = target.files ? target.files[0] : null; \r\n    if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const newImageObject = {\r\n                id: selectedCase.value?.images.length ?? 0,\r\n                path: e.target?.result as string,\r\n                isTitle: false\r\n            };\r\n            selectedCase.value?.images.push(newImageObject);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n};\r\n\r\nconst setTitleImage = (image: { isTitle: boolean }) => { \r\n    selectedCase.value?.images.forEach(img => img.isTitle = false);\r\n    image.isTitle = true;\r\n};\r\n\r\nonMounted(() => {\r\n    fetchCases();\r\n    fetchPrices();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createVNode(_unref(Heading), {\n      tagName: \"h2\",\n      size: \"xl\"\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Кейсы клиники\")\n      ]),\n      _: 1\n    }),\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      (selectedCase.value)\n        ? (_openBlock(), _createElementBlock(\"form\", _hoisted_4, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _hoisted_6,\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(selectedCase.value.images, (image) => {\n                  return (_openBlock(), _createElementBlock(\"li\", {\n                    key: image.id\n                  }, [\n                    _createElementVNode(\"img\", {\n                      src: image.path,\n                      alt: \"\",\n                      style: {\"width\":\"100px\",\"height\":\"auto\"}\n                    }, null, 8, _hoisted_7),\n                    _createElementVNode(\"p\", null, [\n                      _createTextVNode(\"Сделать титульным \"),\n                      _createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        checked: image.isTitle,\n                        onChange: ($event: any) => (setTitleImage(image))\n                      }, null, 40, _hoisted_8)\n                    ])\n                  ]))\n                }), 128))\n              ]),\n              _createElementVNode(\"input\", {\n                type: \"file\",\n                onChange: uploadImage,\n                accept: \"image/*\"\n              }, null, 32)\n            ]),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _hoisted_10,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-name\",\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedCase.value.name) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.name]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_11, [\n              _hoisted_12,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-category\",\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedCase.value.category) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.category]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_13, [\n              _hoisted_14,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-description\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedCase.value.description[0].introduction) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.description[0].introduction]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_15, [\n              _hoisted_16,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-diagnos\",\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((selectedCase.value.description[0].diagnos) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.description[0].diagnos]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_17, [\n              _hoisted_18,\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"case-treatment\",\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((selectedCase.value.description[0].treatment) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.description[0].treatment]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_19, [\n              _hoisted_20,\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"case-total-cost\",\n                type: \"number\",\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((selectedCase.value.totalCost) = $event))\n              }, null, 512), [\n                [_vModelText, selectedCase.value.totalCost]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_21, [\n              _hoisted_22,\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pricesData.value, (service) => {\n                  return (_openBlock(), _createElementBlock(\"li\", {\n                    key: service.id\n                  }, [\n                    _createElementVNode(\"label\", null, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        value: service.id,\n                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((selectedCase.value.priceId) = $event))\n                      }, null, 8, _hoisted_23), [\n                        [_vModelCheckbox, selectedCase.value.priceId]\n                      ]),\n                      _createTextVNode(\" \" + _toDisplayString(service.name), 1)\n                    ])\n                  ]))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"div\", { class: \"buttons\" }, [\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                onClick: saveChanges\n              }, \"Сохранить\"),\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                onClick: cancelEdit\n              }, \"Отменить\")\n            ])\n          ]))\n        : (_openBlock(), _createElementBlock(\"ul\", _hoisted_24, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(casesData.value, (item) => {\n              return (_openBlock(), _createElementBlock(\"li\", {\n                key: item.id,\n                class: \"list__item\",\n                onClick: ($event: any) => (selectCase(item))\n              }, [\n                _createVNode(_unref(Paragraph), {\n                  tagName: \"p\",\n                  size: \"m\",\n                  color: \"dark\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(item.name), 1)\n                  ]),\n                  _: 2\n                }, 1024)\n              ], 8, _hoisted_25))\n            }), 128))\n          ]))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\r\nimport { computed, ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { Heading } from '@/shared/ui/text/heading';\r\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\n\r\ninterface Case {\r\n    id: number;\r\n    name: string;\r\n    category: string;\r\n    description: { introduction: string; diagnos: string; treatment: string }[];\r\n    totalCost: number;\r\n    images: { id: number; path: string; isTitle: boolean }[];\r\n    priceId: number[]; \r\n}\r\n\r\nconst casesData = ref<Case[]>([]);\r\nconst pricesData = ref<any[]>([]);\r\nconst selectedCase = ref<Case | null>(null); \r\n\r\nconst fetchCases = async () => {\r\n    try {\r\n        const response = await axios.get('/cases');\r\n        casesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейсов:', error);\r\n    }\r\n};\r\n\r\nconst fetchPrices = async () => {\r\n    try {\r\n        const response = await axios.get('/prices');\r\n        pricesData.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении цен:', error);\r\n    }\r\n};\r\n\r\nconst fetchCaseById = async (id: number) => {\r\n    try {\r\n        const response = await axios.get(`/cases${id}`);\r\n        selectedCase.value = response.data;\r\n    } catch (error) {\r\n        console.error('Ошибка при получении кейса:', error);\r\n    }\r\n};\r\n\r\nconst saveChanges = async () => {\r\n    if (selectedCase.value) {\r\n        try {\r\n            await axios.put(`/cases/${selectedCase.value.id}`, selectedCase.value);\r\n            console.log('Изменения успешно сохранены для кейса:', selectedCase.value);\r\n            cancelEdit(); \r\n            await fetchCases();\r\n        } catch (error) {\r\n            console.error('Ошибка при сохранении изменений:', error);\r\n        }\r\n    }\r\n};\r\n\r\nconst selectCase = (item: Case) => { \r\n    fetchCaseById(item.id);\r\n};\r\n\r\nconst cancelEdit = () => {\r\n    selectedCase.value = null;\r\n};\r\n\r\nconst uploadImage = (event: Event) => {\r\n    const target = event.target as HTMLInputElement;\r\n    const file = target.files ? target.files[0] : null; \r\n    if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const newImageObject = {\r\n                id: selectedCase.value?.images.length ?? 0,\r\n                path: e.target?.result as string,\r\n                isTitle: false\r\n            };\r\n            selectedCase.value?.images.push(newImageObject);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n};\r\n\r\nconst setTitleImage = (image: { isTitle: boolean }) => { \r\n    selectedCase.value?.images.forEach(img => img.isTitle = false);\r\n    image.isTitle = true;\r\n};\r\n\r\nonMounted(() => {\r\n    fetchCases();\r\n    fetchPrices();\r\n});\r\n</script>\r\n\r\n<template>\r\n    <section class=\"admin-cases\">\r\n        <Heading tagName=\"h2\" size=\"xl\">Кейсы клиники</Heading>\r\n        <hr>\r\n        <div class=\"cases__content\">\r\n            <template v-if=\"selectedCase\">\r\n                <form class=\"cases-form\">\r\n                    <div class=\"form-item item-images\">\r\n                        <label>Добавьте изображения кейса:</label>\r\n                        <ul>\r\n                            <li v-for=\"image in selectedCase.images\" :key=\"image.id\">\r\n                                <img :src=\"image.path\" alt=\"\" style=\"width: 100px; height: auto;\" />\r\n                                <p>Сделать титульным\r\n                                    <input type=\"checkbox\" :checked=\"image.isTitle\" @change=\"setTitleImage(image)\" />\r\n                                </p>\r\n                            </li>\r\n                        </ul>\r\n                        <input type=\"file\" @change=\"uploadImage\" accept=\"image/*\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-name\">Название кейса:</label>\r\n                        <input id=\"case-name\" v-model=\"selectedCase.name\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-category\">Категория:</label>\r\n                        <input id=\"case-category\" v-model=\"selectedCase.category\" />\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-description\">Вводная часть:</label>\r\n                        <textarea id=\"case-description\" v-model=\"selectedCase.description[0].introduction\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-diagnos\">Диагноз:</label>\r\n                        <textarea id=\"case-diagnos\" v-model=\"selectedCase.description[0].diagnos\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-treatment\">Лечение:</label>\r\n                        <textarea id=\"case-treatment\" v-model=\"selectedCase.description[0].treatment\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-item\">\r\n                        <label for=\"case-total-cost\">Общая стоимость:</label>\r\n                        <input id=\"case-total-cost\" type=\"number\" v-model=\"selectedCase.totalCost\" />\r\n                    </div>\r\n                    <div class=\"form-item item-prices\">\r\n                        <label>Выберите оказанные услуги из списка</label>\r\n                        <ul>\r\n                            <li v-for=\"service in pricesData\" :key=\"service.id\">\r\n                                <label>\r\n                                    <input type=\"checkbox\" :value=\"service.id\" v-model=\"selectedCase.priceId\" />\r\n                                    {{ service.name }}\r\n                                </label>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"buttons\">\r\n                        <button type=\"button\" @click=\"saveChanges\">Сохранить</button>\r\n                        <button type=\"button\" @click=\"cancelEdit\">Отменить</button>\r\n                    </div>\r\n                </form>\r\n            </template>\r\n            <template v-else>\r\n                <ul class=\"cases-list\">\r\n                    <li v-for=\"item in casesData\" :key=\"item.id\" class=\"list__item\" @click=\"selectCase(item)\">\r\n                        <Paragraph tagName=\"p\" size=\"m\" color=\"dark\">\r\n                            {{ item.name }}\r\n                        </Paragraph>\r\n                    </li>\r\n                </ul>\r\n            </template>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.admin-cases {\r\n    width: 100%;\r\n    height: 100vh;\r\n\r\n    hr {\r\n        margin: 32px 0;\r\n        border: none;\r\n        border-top: 1px solid #F1F2F4;\r\n    }\r\n\r\n    h2 {\r\n        padding-left: 110px;\r\n    }\r\n\r\n    .cases-form {\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding-left: 110px;\r\n\r\n        .form-item {\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n\r\n        .item-images {\r\n            ul {\r\n                display: flex;\r\n            }\r\n        }\r\n        .item-prices {\r\n        max-height: 200px; \r\n        overflow-y: auto;  \r\n        border: 1px solid #F1F2F4; \r\n        padding: 10px; \r\n        border-radius: 5px; \r\n        background-color: #fff;\r\n    }\r\n\r\n        .buttons {\r\n            margin-top: 50px;\r\n            display: flex;\r\n            justify-content: space-around;\r\n\r\n            button {\r\n                border-radius: 90px;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                border: none;\r\n                font-size: 18px;\r\n                line-height: 21.78px;\r\n                font-weight: 500;\r\n                background: #4963FF;\r\n                color: white;\r\n                width: 240px;\r\n                padding: 10px 20px;\r\n\r\n                &:hover {\r\n                    background: #3D4FB3;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .cases-list {\r\n        padding-left: 110px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n\r\n        .list__item {\r\n            max-width: 40%;\r\n            cursor: pointer;\r\n\r\n            &:hover {\r\n                background: #B1B5C3;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7dc1188f&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7dc1188f\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","for","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_defineComponent","__name","setup","__props","casesData","ref","pricesData","selectedCase","fetchCases","async","response","axios","get","value","data","error","console","fetchPrices","fetchCaseById","id","saveChanges","put","log","cancelEdit","selectCase","item","uploadImage","event","target","file","files","reader","FileReader","onload","e","newImageObject","images","length","path","result","isTitle","push","readAsDataURL","setTitleImage","image","forEach","img","onMounted","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","Heading","tagName","size","default","_withCtx","_createTextVNode","_","_Fragment","_renderList","src","alt","style","type","checked","onChange","$event","accept","_withDirectives","name","_vModelText","category","description","introduction","diagnos","treatment","totalCost","service","priceId","_vModelCheckbox","_toDisplayString","onClick","Paragraph","color","__exports__"],"sourceRoot":""}