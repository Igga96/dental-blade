"use strict";(self["webpackChunkdental_blade"]=self["webpackChunkdental_blade"]||[]).push([[134],{2134:function(e,l,a){a.r(l),a.d(l,{default:function(){return te}});var t=a(641),u=a(953),s=a(33),r=a(3751),n=a(4853),o=a(6278),i=a(4335),v=a(8070),c=a(6583),d=a(2669);const k=e=>((0,t.Qi)("data-v-54ea48b6"),e=e(),(0,t.jt)(),e),p={class:"admin-results"},f={class:"admin-header"},m=k((()=>(0,t.Lk)("option",{value:""},"Все страницы",-1))),g=["value"],b=k((()=>(0,t.Lk)("hr",null,null,-1))),C={class:"results__content"},y={key:1,class:"results__add-form"},h={class:"result__images"},_={class:"image-before"},L={key:0},R=["src"],E={class:"image-after"},X={key:0},F=["src"],Q={class:"input-field"},K=k((()=>(0,t.Lk)("label",null,"путь к странице",-1))),w={class:"form__buttons"},A={class:"results-list"},$={class:"result__images"},I={class:"image-before"},N=["src"],x={class:"image-after"},z=["src"],W={key:0,class:"results__edit-form"},B={class:"result__images"},J={class:"image-before"},U={key:0},V=["src"],D={class:"image-after"},j={key:0},P=["src"],T={class:"input-field"},M=k((()=>(0,t.Lk)("label",null,"путь к странице:",-1))),S={class:"form__buttons"},q={class:"item__buttons"},G=["onClick"],H=["onClick"],O={key:0,class:"loader"},Y=k((()=>(0,t.Lk)("div",{class:"spinner"},null,-1))),Z=[Y];var ee=(0,t.pM)({__name:"index",setup(e){(0,o.Pj)();const l=(0,u.KR)([]),a=(0,u.KR)(""),k=(0,u.KR)(null),Y=(0,u.KR)(null),ee=(0,u.KR)(null),le=(0,u.KR)(""),ae=(0,u.KR)(!1),te=(0,u.KR)(!1),ue=(0,u.KR)(null),se=(0,u.KR)(null),re=(0,u.KR)(!1),ne=()=>{const e=localStorage.getItem("token");return e||(console.error("Токен отсутствует"),null)},oe=async()=>{try{const e=await i.A.get("http://5.35.90.116:8000/results");l.value=e.data}catch(e){console.error("Ошибка при получении результатов:",e)}},ie=(0,t.EW)((()=>{const e=v.J.find((e=>"/"===e.path)),l=v.J.find((e=>"/services"===e.path)),a=l?.children?.filter((e=>""!==e.path))||[];return[e&&{name:e.name,path:e.path},...a.map((e=>({name:e.name,path:`/services/${e.path}`})))].filter(Boolean)})),ve=(0,t.EW)((()=>a.value?l.value.filter((e=>e.slug===a.value)):l.value)),ce=e=>{k.value=e.id,ue.value=e.imageBefore,se.value=e.imageAfter,le.value=e.slug,ae.value=!0,te.value=!1},de=()=>{k.value=null,ue.value=null,se.value=null,le.value=a.value,te.value=!0,ae.value=!1},ke=(e,l)=>{const a=l.target;if(a&&a.files&&a.files[0]){const l=a.files[0],t=new FileReader;t.onload=a=>{"before"===e?(Y.value=l,ue.value=a.target?.result):"after"===e&&(ee.value=l,se.value=a.target?.result)},t.readAsDataURL(l)}},pe=e=>{"before"===e?(ue.value=null,Y.value=null):"after"===e&&(se.value=null,ee.value=null)},fe=async()=>{re.value=!0;const e=ne();if(!e)return console.error("Невозможно сохранить данные, так как отсутствует токен."),void(re.value=!1);try{const l=new FormData;le.value&&l.append("slug",le.value),Y.value&&l.append("imageBefore",Y.value),ee.value&&l.append("imageAfter",ee.value),ae.value&&k.value?await i.A.patch(`http://5.35.90.116:8000/results/${k.value}`,l,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}):te.value&&await i.A.post("http://5.35.90.116:8000/results",l,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}),oe(),me()}catch(l){console.error("Ошибка при сохранении:",l)}finally{re.value=!1}},me=()=>{k.value=null,Y.value=null,ee.value=null,le.value="",ae.value=!1,te.value=!1},ge=async e=>{const l=ne();if(!l)return void console.error("Невозможно удалить результат, так как отсутствует токен.");const a=window.confirm("Вы уверены, что хотите удалить этот результат?");if(a){re.value=!0;try{await i.A.delete(`http://5.35.90.116:8000/results/${e}`,{headers:{Authorization:`Bearer ${l}`}}),oe()}catch(t){console.error("Ошибка при удалении результата:",t)}finally{re.value=!1}}};return(0,t.sV)((()=>{oe()})),(e,l)=>{const o=(0,t.g2)("Paragraph");return(0,t.uX)(),(0,t.CE)("section",p,[(0,t.Lk)("div",f,[(0,t.bF)((0,u.R1)(n.D),{tagName:"h2",size:"xl"},{default:(0,t.k6)((()=>[(0,t.eW)("результаты до / после")])),_:1}),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),class:"slug-select"},[m,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ie.value,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e?.path,value:e?.path},(0,s.v_)(e?.name),9,g)))),128))],512),[[r.u1,a.value]])]),b,(0,t.Lk)("div",C,[te.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,u.R1)(c.$),{key:0,class:"results__add-button",tagName:"button",size:"xs",color:"green",onClick:de},{default:(0,t.k6)((()=>[(0,t.eW)(" добавить новый результат ")])),_:1})),te.value?((0,t.uX)(),(0,t.CE)("form",y,[(0,t.Lk)("div",h,[(0,t.Lk)("div",_,[ue.value?((0,t.uX)(),(0,t.CE)("div",L,[(0,t.Lk)("img",{src:ue.value,alt:"изображение до"},null,8,R)])):(0,t.Q3)("",!0),ue.value?((0,t.uX)(),(0,t.CE)("span",{key:1,onClick:l[1]||(l[1]=e=>pe("before"))},[(0,t.bF)((0,u.R1)(d.I),{type:"cross",color:"red"})])):(0,t.Q3)("",!0),ue.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("input",{key:2,type:"file",onChange:l[2]||(l[2]=e=>ke("before",e))},null,32))]),(0,t.Lk)("div",E,[se.value?((0,t.uX)(),(0,t.CE)("div",X,[(0,t.Lk)("img",{src:se.value,alt:"изображение после"},null,8,F)])):(0,t.Q3)("",!0),se.value?((0,t.uX)(),(0,t.CE)("span",{key:1,onClick:l[3]||(l[3]=e=>pe("after"))},[(0,t.bF)((0,u.R1)(d.I),{type:"cross",color:"red"})])):(0,t.Q3)("",!0),se.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("input",{key:2,type:"file",onChange:l[4]||(l[4]=e=>ke("after",e))},null,32))])]),(0,t.Lk)("div",Q,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=e=>le.value=e)},null,512),[[r.Jo,le.value]]),K]),(0,t.Lk)("div",w,[(0,t.bF)((0,u.R1)(c.$),{tagName:"button",size:"xs",color:"green",onClick:fe},{default:(0,t.k6)((()=>[(0,t.bF)(o,{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Сохранить ")])),_:1})])),_:1}),(0,t.bF)((0,u.R1)(c.$),{tagName:"button",size:"xs",color:"white",onClick:me},{default:(0,t.k6)((()=>[(0,t.bF)(o,{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Отмена ")])),_:1})])),_:1})])])):(0,t.Q3)("",!0),(0,t.Lk)("div",A,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ve.value,(e=>((0,t.uX)(),(0,t.CE)("div",{class:"result-item",key:e.id},[(0,t.Lk)("div",$,[(0,t.Lk)("div",I,[(0,t.Lk)("img",{src:e.imageBefore,alt:"До"},null,8,N)]),(0,t.Lk)("div",x,[(0,t.Lk)("img",{src:e.imageAfter,alt:"После"},null,8,z)])]),ae.value&&k.value===e.id?((0,t.uX)(),(0,t.CE)("form",W,[(0,t.Lk)("div",B,[(0,t.Lk)("div",J,[ue.value?((0,t.uX)(),(0,t.CE)("div",U,[(0,t.Lk)("img",{src:ue.value,alt:"изображение до"},null,8,V)])):(0,t.Q3)("",!0),ue.value?((0,t.uX)(),(0,t.CE)("span",{key:1,onClick:l[6]||(l[6]=e=>pe("before"))},[(0,t.bF)((0,u.R1)(d.I),{type:"cross",color:"red"})])):(0,t.Q3)("",!0),ue.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("input",{key:2,type:"file",onChange:l[7]||(l[7]=e=>ke("before",e))},null,32))]),(0,t.Lk)("div",D,[se.value?((0,t.uX)(),(0,t.CE)("div",j,[(0,t.Lk)("img",{src:se.value,alt:"изображение после"},null,8,P)])):(0,t.Q3)("",!0),se.value?((0,t.uX)(),(0,t.CE)("span",{key:1,onClick:l[8]||(l[8]=e=>pe("after"))},[(0,t.bF)((0,u.R1)(d.I),{type:"cross",color:"red"})])):(0,t.Q3)("",!0),se.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("input",{key:2,type:"file",onChange:l[9]||(l[9]=e=>ke("after",e))},null,32))])]),(0,t.Lk)("div",T,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=e=>le.value=e)},null,512),[[r.Jo,le.value]]),M]),(0,t.Lk)("div",S,[(0,t.bF)((0,u.R1)(c.$),{tagName:"button",size:"xs",color:"green",onClick:fe},{default:(0,t.k6)((()=>[(0,t.bF)(o,{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Сохранить ")])),_:1})])),_:1}),(0,t.bF)((0,u.R1)(c.$),{tagName:"button",size:"xs",color:"white",n:"",onClick:me},{default:(0,t.k6)((()=>[(0,t.bF)(o,{tagName:"span",color:"dark"},{default:(0,t.k6)((()=>[(0,t.eW)(" Отмена ")])),_:1})])),_:1})])])):(0,t.Q3)("",!0),(0,t.Lk)("div",q,[(0,t.Lk)("span",{onClick:l=>ce(e)},[(0,t.bF)((0,u.R1)(d.I),{type:"edit",color:"dark"})],8,G),(0,t.Lk)("span",{onClick:l=>ge(e.id)},[(0,t.bF)((0,u.R1)(d.I),{type:"delete",color:"red"})],8,H)])])))),128))])]),re.value?((0,t.uX)(),(0,t.CE)("div",O,Z)):(0,t.Q3)("",!0)])}}}),le=a(6262);const ae=(0,le.A)(ee,[["__scopeId","data-v-54ea48b6"]]);var te=ae}}]);
//# sourceMappingURL=134.js.map